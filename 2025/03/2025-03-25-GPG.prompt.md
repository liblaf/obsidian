---
created: 2025-03-25T08:49:16+08:00
modified: 2025-03-25T10:31:30+08:00
---

Please write a tutorial on GPG. The tutorial should cover the following topics:

- Introduction
	- read more about [Concepts](https://www.gnupg.org/gph/en/manual.html#CONCEPTS)
	- public-key ciphers
	- GPG, or GunPG, or GUN Privacy Guard
	- primary key, subkeys, usage (E, S, C, A) (with examples)
- generate a GPG key
- add a subkey (e.g. for signing)
- configure Git and GitHub
- export, import, trust
- what happens after revoke / expiration (e.g. old commits validity)

Notes:

- use examples to explain concepts and ideas

## Generate a GPG Key

```console
$ gpg --full-generate-key
gpg (GnuPG) 2.4.7; Copyright (C) 2024 g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
```

```console
Please select what kind of key you want:
   (1) RSA and RSA
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
   (9) ECC (sign and encrypt) *default*
  (10) ECC (sign only)
  (14) Existing key from card
Your selection?
```

```console
Please select which elliptic curve you want:
   (1) Curve 25519 *default*
   (4) NIST P-384
   (6) Brainpool P-256
Your selection?
```

```console
Please specify how long the key should be valid.
         0 = key does not expire
      <n>  = key expires in n days
      <n>w = key expires in n weeks
      <n>m = key expires in n months
      <n>y = key expires in n years
Key is valid for? (0)
```

```console
GnuPG needs to construct a user ID to identify your key.

Real name: liblaf
Email address: 30631553+liblaf@users.noreply.github.com
Comment:
You selected this USER-ID:
    "liblaf <30631553+liblaf@users.noreply.github.com>"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
```

```console
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
gpg: directory '/home/liblaf/.gnupg/openpgp-revocs.d' created
gpg: revocation certificate stored as '/home/liblaf/.gnupg/openpgp-revocs.d/FE194EC8F4B09D40FB16B8569234E2737A49D82A.rev'
public and secret key created and signed.

pub   ed25519 2025-03-25 [SC]
      FE194EC8F4B09D40FB16B8569234E2737A49D82A
uid                      liblaf <30631553+liblaf@users.noreply.github.com>
sub   cv25519 2025-03-25 [E]
```

## Add a subkey

```console
$ gpg --edit-key '9234E2737A49D82A' addkey
gpg (GnuPG) 2.4.7; Copyright (C) 2024 g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Secret key is available.

sec  ed25519/9234E2737A49D82A
     created: 2025-03-25  expires: never       usage: SC
     trust: ultimate      validity: ultimate
ssb  cv25519/5632BF6364A13237
     created: 2025-03-25  expires: never       usage: E
[ultimate] (1). liblaf <30631553+liblaf@users.noreply.github.com>
```

```console
Please select what kind of key you want:
   (3) DSA (sign only)
   (4) RSA (sign only)
   (5) Elgamal (encrypt only)
   (6) RSA (encrypt only)
  (10) ECC (sign only)
  (12) ECC (encrypt only)
  (14) Existing key from card
Your selection? 10
```

```console
Please select which elliptic curve you want:
   (1) Curve 25519 *default*
   (4) NIST P-384
   (6) Brainpool P-256
Your selection?
```

```console
Please specify how long the key should be valid.
         0 = key does not expire
      <n>  = key expires in n days
      <n>w = key expires in n weeks
      <n>m = key expires in n months
      <n>y = key expires in n years
Key is valid for? (0)
Key does not expire at all
Is this correct? (y/N) y
Really create? (y/N) y
```

```console
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.

sec  ed25519/9234E2737A49D82A
     created: 2025-03-25  expires: never       usage: SC
     trust: ultimate      validity: ultimate
ssb  cv25519/5632BF6364A13237
     created: 2025-03-25  expires: never       usage: E
ssb  ed25519/2F451BE41CBA0019
     created: 2025-03-25  expires: never       usage: S
[ultimate] (1). liblaf <30631553+liblaf@users.noreply.github.com>
```

```console
gpg> save
```

## List Keys

```console
$ gpg --keyid-format long --list-public-keys
/home/liblaf/.gnupg/pubring.kbx
-------------------------------
pub   ed25519/9234E2737A49D82A 2025-03-25 [SC]
      FE194EC8F4B09D40FB16B8569234E2737A49D82A
uid                 [ultimate] liblaf <30631553+liblaf@users.noreply.github.com>
sub   cv25519/5632BF6364A13237 2025-03-25 [E]
sub   ed25519/2F451BE41CBA0019 2025-03-25 [S]
```

```console
$ gpg --keyid-format long --list-secret-keys
/home/liblaf/.gnupg/pubring.kbx
-------------------------------
sec   ed25519/9234E2737A49D82A 2025-03-25 [SC]
      FE194EC8F4B09D40FB16B8569234E2737A49D82A
uid                 [ultimate] liblaf <30631553+liblaf@users.noreply.github.com>
ssb   cv25519/5632BF6364A13237 2025-03-25 [E]
ssb   ed25519/2F451BE41CBA0019 2025-03-25 [S]
```

## Export \& Import Keys

```console
$ gpg --armor --export --output 'public.asc' '2F451BE41CBA0019'
$ cat 'public.asc'
-----BEGIN PGP PUBLIC KEY BLOCK-----
...
-----END PGP PUBLIC KEY BLOCK-----
```

```console
$ gpg --armor --export-secret-keys --output 'secret.asc' '9234E2737A49D82A'
$ cat 'secret.asc'
-----BEGIN PGP PRIVATE KEY BLOCK-----
...
-----END PGP PRIVATE KEY BLOCK-----
```

```console
$ gpg --import 'secret.asc'
gpg: key 9234E2737A49D82A: public key "liblaf <30631553+liblaf@users.noreply.github.com>" imported
gpg: key 9234E2737A49D82A: secret key imported
gpg: Total number processed: 1
gpg:               imported: 1
gpg:       secret keys read: 1
gpg:   secret keys imported: 1
```

```console
$ gpg --edit-key '9234E2737A49D82A' trust
gpg (GnuPG) 2.4.7; Copyright (C) 2024 g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Secret key is available.

sec  ed25519/9234E2737A49D82A
     created: 2025-03-25  expires: never       usage: SC
     trust: unknown       validity: unknown
ssb  cv25519/5632BF6364A13237
     created: 2025-03-25  expires: never       usage: E
ssb  ed25519/2F451BE41CBA0019
     created: 2025-03-25  expires: never       usage: S
[ unknown] (1). liblaf <30631553+liblaf@users.noreply.github.com>
```

```console
sec  ed25519/9234E2737A49D82A
     created: 2025-03-25  expires: never       usage: SC
     trust: unknown       validity: unknown
ssb  cv25519/5632BF6364A13237
     created: 2025-03-25  expires: never       usage: E
ssb  ed25519/2F451BE41CBA0019
     created: 2025-03-25  expires: never       usage: S
[ unknown] (1). liblaf <30631553+liblaf@users.noreply.github.com>

Please decide how far you trust this user to correctly verify other users' keys
(by looking at passports, checking fingerprints from different sources, etc.)

  1 = I don't know or won't say
  2 = I do NOT trust
  3 = I trust marginally
  4 = I trust fully
  5 = I trust ultimately
  m = back to the main menu

Your decision? 5
Do you really want to set this key to ultimate trust? (y/N) y
```
